:toc:

= Cypher Date

== Source schema

[source,graphql,schema=true]
----
type Movie {
  id: ID
  date: Date
}
----

== Configuration

.Configuration
[source,json,schema-config=true]
----
{
  "enableRegex": true
}
----
== GTE Read

.GraphQL-Query
[source,graphql]
----
{
  movies(where: {date_GTE: "1980-04-08"}) {
    date
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this_date_GTE": {
    "year": 1980,
    "month": 4,
    "day": 8
  }
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WHERE this.date >= $this_date_GTE
RETURN this { .date } as this
----

== Simple Create

.GraphQL-Query
[source,graphql]
----
mutation {
  createMovies(input: [{date: "1970-01-01"}]) {
    movies {
      date
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this0_date": {
    "year": 1970,
    "month": 1,
    "day": 1
  }
}
----

.Expected Cypher output
[source,cypher]
----
CALL {
CREATE (this0:Movie)
SET this0.date = $this0_date
RETURN this0
}
RETURN 
this0 { .date } AS this0
----

== Simple Read

.GraphQL-Query
[source,graphql]
----
{
  movies(where: {date: "1970-01-01"}) {
    date
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this_date": {
    "year": 1970,
    "month": 1,
    "day": 1
  }
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)
WHERE this.date = $this_date
RETURN this { .date } as this
----

== Simple Update

.GraphQL-Query
[source,graphql]
----
mutation {
  updateMovies(update: {date: "1970-01-01"}) {
    movies {
      id
      date
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this_update_date": {
    "year": 1970,
    "month": 1,
    "day": 1
  }
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:Movie)

SET this.date = $this_update_date

RETURN this { .id, .date } AS this
----

