:toc:

= Plural in Node directive

== Source schema

[source,graphql,schema=true]
----
type Tech @node(plural: "Techs") {
  name: String
}
----

== Configuration

.Configuration
[source,json,schema-config=true]
----
{
}
----
== Count Tech with plural techs using aggregation

.GraphQL-Query
[source,graphql]
----
{
  techsAggregate {
    count
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:`Tech`)
RETURN { count: count(this) }
----

== Create Tech with plural techs using aggregation

.GraphQL-Query
[source,graphql]
----
mutation {
  createTechs(input: [{name: "Highlander"}]) {
    techs {
      name
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this0_name": "Highlander"
}
----

.Expected Cypher output
[source,cypher]
----
CALL {
CREATE (this0:`Tech`)
SET this0.name = $this0_name
RETURN this0
}
RETURN 
this0 { .name } AS this0
----

== Delete Tech with plural techs using aggregation

.GraphQL-Query
[source,graphql]
----
mutation {
  deleteTechs(where: {name: "Matrix"}) {
    nodesDeleted
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this_name": "Matrix"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:`Tech`)
WHERE this.name = $this_name
DETACH DELETE this
----

== Query with aliases

.GraphQL-Query
[source,graphql]
----
{
  technologies: techs {
    name
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:`Tech`)
RETURN this { .name } as this
----

== Select Tech with plural techs

.GraphQL-Query
[source,graphql]
----
{
  techs {
    name
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:`Tech`)
RETURN this { .name } as this
----

== Update Tech with plural techs using aggregation

.GraphQL-Query
[source,graphql]
----
mutation {
  updateTechs(update: {name: "Matrix"}) {
    techs {
      name
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "this_update_name": "Matrix"
}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:`Tech`)

SET this.name = $this_update_name

RETURN this { .name } AS this
----

