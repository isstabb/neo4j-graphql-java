:toc:

= Cypher -> fulltext -> Aggregate

== Source schema

[source,graphql,schema=true]
----
type Movie @fulltext(indexes: [{name: "MovieTitle", fields: ["title"]}]) {
  title: String
}
----

== Configuration

.Configuration
[source,json,schema-config=true]
----
{}
----
== simple aggregate with single fulltext property

.GraphQL-Query
[source,graphql]
----
{
  moviesAggregate(fulltext: {MovieTitle: {phrase: "something AND something"}}) {
    count
  }
}
----

.Expected Cypher params
[source,json]
----
{
  "param0": "something AND something"
}
----

.Expected Cypher output
[source,cypher]
----
CALL db.index.fulltext.queryNodes('MovieTitle', $param0) YIELD node AS this
WHERE 'Movie' IN labels(this)
RETURN {
	count: count(this)
}
----

'''

