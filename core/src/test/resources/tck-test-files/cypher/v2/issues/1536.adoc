:toc:

= https://github.com/neo4j/graphql/issues/1536

== Source schema

[source,graphql,schema=true]
----
type SomeNode {
  id: ID! @id
  other: OtherNode! @relationship(type: "HAS_OTHER_NODES", direction: OUT)
}

type OtherNode {
  id: ID! @id
  interfaceField: MyInterface! @relationship(type: "HAS_INTERFACE_NODES", direction: OUT)
}

interface MyInterface {
  id: ID! @id
}

type MyImplementation implements MyInterface {
  id: ID! @id
}
----

== Configuration

.Configuration
[source,json,schema-config=true]
----
{}
----
== query nested interfaces

.GraphQL-Query
[source,graphql]
----
{
  someNodes {
    id
    other {
      interfaceField {
        id
      }
    }
  }
}
----

.Expected Cypher params
[source,json]
----
{}
----

.Expected Cypher output
[source,cypher]
----
MATCH (this:SomeNode)
CALL {
	WITH this
	MATCH (this)-[this0:HAS_OTHER_NODES]->(this_other:OtherNode)
	WITH *
	CALL {
		WITH this_other
		MATCH (this_other)-[this1:HAS_INTERFACE_NODES]->(this_other_MyImplementation:MyImplementation)
		RETURN {
			__resolveType: 'MyImplementation',
			id: this_other_MyImplementation.id
		} AS this_other_interfaceField
	}
	WITH this_other {
		interfaceField: this_other_interfaceField
	} AS this_other
	RETURN head(collect(this_other)) AS this_other
}
RETURN this {
	.id,
	other: this_other
} AS this
----

'''

